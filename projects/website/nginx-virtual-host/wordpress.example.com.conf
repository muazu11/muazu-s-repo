server {
listen 80;
server_name wordpress.example.com;
root /var/www/wordpress.example.com;
index index.php index.html test.php test.html;

location = /favicon.ico {

	log_not_found off;

	access_log off;

}

location = /robots.txt {allow all; log_not_found off; access_log off;}

location / {
	try_files $uri $uri/ /index.php?$args;
}

location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_read_timeout 300;
        fastcgi_send_timeout 300;
}
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
	expires max;
	log_not_found off;
}
	error_log /var/log/nginx/wordpress_error.log debug;
	access_log /var/log/nginx/wordpress_access.log;

location ~ /\.env {
    deny all;
}

  location ~ /\.ht {
    deny all;
  }

location /mailadmin {
        alias /var/www/postfixadmin/public;
        index index.php;

        location ~ ^/mailadmin/(.+\.php)$ {
            alias /var/www/postfixadmin/public/$1;
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_index index.php;
	    include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $request_filename;
        }

	location ~* ^/mailadmin/(.+\.(js|css|png|jpg|jpeg|gif|ico|svg))$ {
        	alias /var/www/postfixadmin/public/$1;
	       	expires max;
       		log_not_found off;	
    		access_log off;	
    		add_header Cache-Control "public, no-transform";
    }

	try_files $uri $uri/ /mailadmin/index.php?$args;
  error_log /var/log/nginx/postfixadmin_error.log debug;
  access_log /var/log/nginx/postfixadmin_access.log;  
 }

location /webmail {
        alias /var/www/roundcubemail;
        index index.php;

        location ~ ^/webmail/(.+\.php)$ {
            alias /var/www/roundcubemail/$1;
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_index index.php;
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $request_filename;
        }

        location ~* ^/webmail/(.+\.(js|css|png|jpg|jpeg|gif|ico|svg))$ {
                alias /var/www/roundcubemail/$1;
                expires max;
                log_not_found off;
                access_log off;
                add_header Cache-Control "public, no-transform";
    }

        try_files $uri $uri/ /webmail/index.php?$args;
  error_log /var/log/nginx/roundcube.error debug;
  access_log /var/log/nginx/roundcube.access;
 }

}

